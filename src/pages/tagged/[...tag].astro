---
import type { GetStaticPaths } from 'astro';
import { getCollection } from 'astro:content';
import PostList from '../../components/PostList.astro';

export const getStaticPaths = (async () => {
	const posts = await getCollection('posts');
	const tags = new Set(posts.flatMap(post => post.data.tags));
	return Array.from(tags).map(tag => ({ params: { tag } }));
}) satisfies GetStaticPaths;

const { tag } = Astro.params;
---

<PostList tag={tag} />
